{
  "nodes": [
    {
      "id": 139,
      "slug": "start",
      "kind": "start",
      "display_name": "D√©but",
      "agent_key": null,
      "parent_slug": null,
      "position": 1,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "auto_start": true
      },
      "metadata": {
        "order": 1
      }
    },
    {
      "id": 140,
      "slug": "assistant-message-intro",
      "kind": "assistant_message",
      "display_name": "Introduction du laboratoire",
      "agent_key": null,
      "parent_slug": null,
      "position": 2,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "# Labo 1 ‚Äî Environnement de programmation distant pour objets connect√©s\n\nAujourd'hui, nous allons pr√©parer notre environnement de programmation.\n\n## üéí Mat√©riel requis\n\n- Clavier Raspberry Pi\n- Raspberry Pi 5\n- √âcran tactile pour Raspberry Pi 5\n- Alimentation USB-C pour Raspberry Pi 5\n- C√¢ble micro-USB pour clavier\n- Carte micro SD 64 GB\n- LilyGO A7670G avec antenne GPS et LTE\n- Plaquette de prototypage (breadboard)\n- LED rouge et LED verte\n- R√©sistances appropri√©es (220Œ© - 330Œ©)\n- Fils de connexion (jumper wires)\n- Carte SIM\n- C√¢ble USB-A √† USB-C\n\nVa chercher ton mat√©riel, et dis-moi quand tu es pr√™t √† passer √† la prochaine √©tape!",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 2
      }
    },
    {
      "id": 141,
      "slug": "widget-pret-materiel",
      "kind": "widget",
      "display_name": "Pr√™t avec le mat√©riel?",
      "agent_key": null,
      "parent_slug": null,
      "position": 3,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "widget": {
          "slug": "pret-a-debuter",
          "source": "library",
          "variables": {
            "text": "J'ai tout le mat√©riel, je suis pr√™t!"
          }
        }
      },
      "metadata": {
        "order": 3
      }
    },
    {
      "id": 142,
      "slug": "condition-pret-materiel",
      "kind": "condition",
      "display_name": "V√©rification mat√©riel pr√™t",
      "agent_key": null,
      "parent_slug": null,
      "position": 4,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.action.raw_payload.value.",
        "tools": null
      },
      "metadata": {
        "order": 4
      }
    },
    {
      "id": 143,
      "slug": "end-abandon-materiel",
      "kind": "end",
      "display_name": "Fin - Abandon mat√©riel",
      "agent_key": null,
      "parent_slug": null,
      "position": 5,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "status": {
          "type": "closed",
          "reason": "√âtudiant pas pr√™t"
        },
        "message": "Reviens quand tu auras tout le mat√©riel!"
      },
      "metadata": {
        "order": 5
      }
    },
    {
      "id": 200,
      "slug": "assistant-message-section1",
      "kind": "assistant_message",
      "display_name": "Section 1: Installation Ubuntu Server",
      "agent_key": null,
      "parent_slug": null,
      "position": 20,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "## 1. Installation Ubuntu Server\n\n### Pr√©paration de la carte SD\n\n1. Installer Ubuntu Server (derni√®re version LTS) sur le Raspberry Pi 5\n   - Utilisez **Raspberry Pi Imager** disponible sur [raspberrypi.com](https://www.raspberrypi.com/software/)\n   - S√©lectionnez: `Other general-purpose OS ‚Üí Ubuntu ‚Üí Ubuntu Server 24.04 LTS (64-bit)`\n\n2. Lors de la pr√©paration de la carte micro-SD:\n   - **Activer SSH** ‚úì (crucial pour l'acc√®s √† distance)\n   - **Configurer username, password et hostname**\n\n3. Installer l'√©cran sur le Raspberry Pi 5 (suivre les instructions du fabricant)\n\n4. Brancher le clavier sur le Raspberry Pi 5 (port USB)\n\n**Premier d√©marrage:**\n- Au premier boot, Ubuntu va finaliser l'installation (2-3 minutes)\n- Attendez l'invite de connexion: `ubuntu login:`\n- Connectez-vous avec le username/password configur√©s\n\n---\n\nInstalle Ubuntu Server sur ta carte SD et d√©marre ton Raspberry Pi. Dis-moi quand c'est fait!",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 20
      }
    },
    {
      "id": 201,
      "slug": "widget-section1-done",
      "kind": "widget",
      "display_name": "Ubuntu install√©?",
      "agent_key": null,
      "parent_slug": null,
      "position": 21,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "widget": {
          "slug": "pret-a-debuter",
          "source": "library",
          "variables": {
            "text": "Ubuntu Server est install√© et je suis connect√©!"
          }
        }
      },
      "metadata": {
        "order": 21
      }
    },
    {
      "id": 202,
      "slug": "condition-section1-done",
      "kind": "condition",
      "display_name": "Ubuntu install√©?",
      "agent_key": null,
      "parent_slug": null,
      "position": 22,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.action.raw_payload.value.",
        "tools": null
      },
      "metadata": {
        "order": 22
      }
    },
    {
      "id": 203,
      "slug": "end-section1-abandon",
      "kind": "end",
      "display_name": "Fin - Abandon Section 1",
      "agent_key": null,
      "parent_slug": null,
      "position": 23,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "status": {
          "type": "closed",
          "reason": "√âtudiant a abandonn√©"
        },
        "message": "Reviens quand Ubuntu sera install√©!"
      },
      "metadata": {
        "order": 23
      }
    },
    {
      "id": 204,
      "slug": "assistant-message-checkpoint-hostname",
      "kind": "assistant_message",
      "display_name": "Checkpoint: hostname",
      "agent_key": null,
      "parent_slug": null,
      "position": 24,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "### ‚úÖ Checkpoint technique\n\nTape la commande suivante sur ton Raspberry Pi et colle le r√©sultat:\n\n```bash\nhostname && cat /etc/os-release | head -3\n```",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 24
      }
    },
    {
      "id": 205,
      "slug": "state-init-compteur-cp1",
      "kind": "state",
      "display_name": "Init compteur CP1",
      "agent_key": null,
      "parent_slug": null,
      "position": 25,
      "is_enabled": true,
      "parameters": {
        "state": [
          {
            "target": "state.compteur",
            "expression": "0"
          }
        ],
        "tools": null
      },
      "metadata": {
        "order": 25
      }
    },
    {
      "id": 206,
      "slug": "wait-reponse-cp1",
      "kind": "wait_for_user_input",
      "display_name": "Attente r√©ponse CP1",
      "agent_key": null,
      "parent_slug": null,
      "position": 26,
      "is_enabled": true,
      "parameters": {
        "tools": null
      },
      "metadata": {
        "order": 26
      }
    },
    {
      "id": 207,
      "slug": "agent-eval-cp1",
      "kind": "agent",
      "display_name": "√âvaluation checkpoint hostname",
      "agent_key": null,
      "parent_slug": null,
      "position": 27,
      "is_enabled": true,
      "parameters": {
        "model": "gpt-5-nano",
        "instructions": "# R√¥le\nTu valides une sortie de commande. Produis uniquement un JSON strict.\n\n# Commande ex√©cut√©e\n`hostname && cat /etc/os-release | head -3`\n\n# Crit√®res de validation\nLa sortie doit contenir:\n- Un nom d'h√¥te (hostname) sur la premi√®re ligne\n- Les lignes NAME, VERSION ou PRETTY_NAME contenant \"Ubuntu\"\n- Format coh√©rent avec une sortie Linux r√©elle\n\n# R√®gles\n- Si la sortie est valide ‚Üí `\"ok\": true`\n- Si pas de hostname ou pas Ubuntu ‚Üí `\"ok\": false`\n- Si r√©ponse vide ou incoh√©rente ‚Üí `\"ok\": false`",
        "model_provider": "openai",
        "model_settings": {
          "text": { "verbosity": "low" },
          "reasoning": { "effort": "low" },
          "include_chat_history": true
        },
        "response_format": {
          "name": "workflow_output",
          "type": "json_schema",
          "schema": {
            "type": "object",
            "required": ["ok"],
            "properties": {
              "ok": { "type": "boolean" }
            }
          },
          "strict": true
        },
        "model_provider_slug": "openai"
      },
      "metadata": {
        "order": 27
      }
    },
    {
      "id": 208,
      "slug": "condition-eval-cp1",
      "kind": "condition",
      "display_name": "Checkpoint hostname valide?",
      "agent_key": null,
      "parent_slug": null,
      "position": 28,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.output_structured.ok",
        "tools": null
      },
      "metadata": {
        "order": 28
      }
    },
    {
      "id": 209,
      "slug": "state-incr-compteur-cp1",
      "kind": "state",
      "display_name": "Incr√©mentation compteur CP1",
      "agent_key": null,
      "parent_slug": null,
      "position": 29,
      "is_enabled": true,
      "parameters": {
        "state": [
          {
            "target": "state.compteur",
            "expression": "(state.get('compteur', 0) or 0) + 1"
          }
        ],
        "tools": null
      },
      "metadata": {
        "order": 29
      }
    },
    {
      "id": 210,
      "slug": "condition-max-tentatives-cp1",
      "kind": "condition",
      "display_name": "Max tentatives CP1?",
      "agent_key": null,
      "parent_slug": null,
      "position": 30,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "state.compteur",
        "tools": null
      },
      "metadata": {
        "order": 30
      }
    },
    {
      "id": 211,
      "slug": "assistant-message-appel-prof-cp1",
      "kind": "assistant_message",
      "display_name": "Appel enseignant CP1",
      "agent_key": null,
      "parent_slug": null,
      "position": 31,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "La sortie ne semble pas correspondre. Ton enseignant va venir t'aider.\n\nEntre le code de l'enseignant pour continuer:",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 31
      }
    },
    {
      "id": 212,
      "slug": "wait-code-prof-cp1",
      "kind": "wait_for_user_input",
      "display_name": "Attente code enseignant CP1",
      "agent_key": null,
      "parent_slug": null,
      "position": 32,
      "is_enabled": true,
      "parameters": {
        "tools": null
      },
      "metadata": {
        "order": 32
      }
    },
    {
      "id": 213,
      "slug": "condition-code-prof-cp1",
      "kind": "condition",
      "display_name": "Code enseignant correct CP1?",
      "agent_key": null,
      "parent_slug": null,
      "position": 33,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.user_message",
        "tools": null
      },
      "metadata": {
        "order": 33
      }
    },
    {
      "id": 214,
      "slug": "agent-retroaction-cp1",
      "kind": "agent",
      "display_name": "R√©troaction CP1",
      "agent_key": null,
      "parent_slug": null,
      "position": 34,
      "is_enabled": true,
      "parameters": {
        "model": "gpt-5-nano",
        "instructions": "L'utilisateur doit coller la sortie de `hostname && cat /etc/os-release | head -3`. Aide-le √† v√©rifier qu'il a bien ex√©cut√© la commande sur son Raspberry Pi et qu'il a copi√© la sortie compl√®te.",
        "model_provider": "openai",
        "model_settings": {
          "text": { "verbosity": "low" },
          "reasoning": { "effort": "low" },
          "include_chat_history": true
        },
        "model_provider_slug": "openai"
      },
      "metadata": {
        "order": 34
      }
    },
    {
      "id": 215,
      "slug": "assistant-message-cp1-ok",
      "kind": "assistant_message",
      "display_name": "Checkpoint hostname OK",
      "agent_key": null,
      "parent_slug": null,
      "position": 35,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "‚úÖ Ubuntu Server est bien install√© sur ton Raspberry Pi!\n\nPassons maintenant √† la configuration r√©seau.",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 35
      }
    },
    {
      "id": 300,
      "slug": "assistant-message-section2",
      "kind": "assistant_message",
      "display_name": "Section 2: Configuration r√©seau",
      "agent_key": null,
      "parent_slug": null,
      "position": 40,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "## 2. Configuration r√©seau\n\n### 2.1 Adresse IP statique (Ethernet)\n\n```bash\nsudo nano /etc/netplan/01-ethernet.yaml\n```\n\nContenu:\n```yaml\nnetwork:\n  version: 2\n  renderer: networkd\n  ethernets:\n    eth0:\n      dhcp4: false\n      addresses:\n        - 192.168.1.9/24\n      gateway4: 192.168.1.1\n      nameservers:\n        addresses:\n          - 1.1.1.1\n          - 8.8.8.8\n```\n\n**Configuration en connexion directe PC ‚Üî RPi:**\n- **Raspberry Pi:** 192.168.1.9/24\n- **Votre PC:** 192.168.1.10/24 (√† configurer sur votre PC)\n\nAppliquer:\n```bash\nsudo netplan apply\n```\n\n---\n\nConfigure l'IP statique et dis-moi quand c'est fait!",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 40
      }
    },
    {
      "id": 301,
      "slug": "widget-section2-done",
      "kind": "widget",
      "display_name": "IP configur√©e?",
      "agent_key": null,
      "parent_slug": null,
      "position": 41,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "widget": {
          "slug": "pret-a-debuter",
          "source": "library",
          "variables": {
            "text": "L'IP statique est configur√©e!"
          }
        }
      },
      "metadata": {
        "order": 41
      }
    },
    {
      "id": 302,
      "slug": "condition-section2-done",
      "kind": "condition",
      "display_name": "IP configur√©e?",
      "agent_key": null,
      "parent_slug": null,
      "position": 42,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.action.raw_payload.value.",
        "tools": null
      },
      "metadata": {
        "order": 42
      }
    },
    {
      "id": 303,
      "slug": "end-section2-abandon",
      "kind": "end",
      "display_name": "Fin - Abandon Section 2",
      "agent_key": null,
      "parent_slug": null,
      "position": 43,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "status": {
          "type": "closed",
          "reason": "√âtudiant a abandonn√©"
        },
        "message": "Reviens quand le r√©seau sera configur√©!"
      },
      "metadata": {
        "order": 43
      }
    },
    {
      "id": 304,
      "slug": "assistant-message-checkpoint-ip",
      "kind": "assistant_message",
      "display_name": "Checkpoint: ip a",
      "agent_key": null,
      "parent_slug": null,
      "position": 44,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "### ‚úÖ Checkpoint technique\n\nTape la commande suivante et colle le r√©sultat:\n\n```bash\nip -br a\n```",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 44
      }
    },
    {
      "id": 305,
      "slug": "state-init-compteur-cp2",
      "kind": "state",
      "display_name": "Init compteur CP2",
      "agent_key": null,
      "parent_slug": null,
      "position": 45,
      "is_enabled": true,
      "parameters": {
        "state": [
          {
            "target": "state.compteur",
            "expression": "0"
          }
        ],
        "tools": null
      },
      "metadata": {
        "order": 45
      }
    },
    {
      "id": 306,
      "slug": "wait-reponse-cp2",
      "kind": "wait_for_user_input",
      "display_name": "Attente r√©ponse CP2",
      "agent_key": null,
      "parent_slug": null,
      "position": 46,
      "is_enabled": true,
      "parameters": {
        "tools": null
      },
      "metadata": {
        "order": 46
      }
    },
    {
      "id": 307,
      "slug": "agent-eval-cp2",
      "kind": "agent",
      "display_name": "√âvaluation checkpoint IP",
      "agent_key": null,
      "parent_slug": null,
      "position": 47,
      "is_enabled": true,
      "parameters": {
        "model": "gpt-5-nano",
        "instructions": "# R√¥le\nTu valides une sortie de commande. Produis uniquement un JSON strict.\n\n# Commande ex√©cut√©e\n`ip -br a`\n\n# Crit√®res de validation\nLa sortie doit contenir:\n- Une interface `lo` (loopback) avec √©tat UP\n- Une interface r√©seau (eth0, enp*, wlan0, etc.)\n- Au moins une adresse IP visible (format X.X.X.X/XX)\n- Format typique: `INTERFACE STATE IP`\n\n# R√®gles\n- Si sortie contient interfaces et IPs valides ‚Üí `\"ok\": true`\n- Si sortie vide, pas d'IP, ou format incoh√©rent ‚Üí `\"ok\": false`",
        "model_provider": "openai",
        "model_settings": {
          "text": { "verbosity": "low" },
          "reasoning": { "effort": "low" },
          "include_chat_history": true
        },
        "response_format": {
          "name": "workflow_output",
          "type": "json_schema",
          "schema": {
            "type": "object",
            "required": ["ok"],
            "properties": {
              "ok": { "type": "boolean" }
            }
          },
          "strict": true
        },
        "model_provider_slug": "openai"
      },
      "metadata": {
        "order": 47
      }
    },
    {
      "id": 308,
      "slug": "condition-eval-cp2",
      "kind": "condition",
      "display_name": "Checkpoint IP valide?",
      "agent_key": null,
      "parent_slug": null,
      "position": 48,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.output_structured.ok",
        "tools": null
      },
      "metadata": {
        "order": 48
      }
    },
    {
      "id": 309,
      "slug": "state-incr-compteur-cp2",
      "kind": "state",
      "display_name": "Incr√©mentation compteur CP2",
      "agent_key": null,
      "parent_slug": null,
      "position": 49,
      "is_enabled": true,
      "parameters": {
        "state": [
          {
            "target": "state.compteur",
            "expression": "(state.get('compteur', 0) or 0) + 1"
          }
        ],
        "tools": null
      },
      "metadata": {
        "order": 49
      }
    },
    {
      "id": 310,
      "slug": "condition-max-tentatives-cp2",
      "kind": "condition",
      "display_name": "Max tentatives CP2?",
      "agent_key": null,
      "parent_slug": null,
      "position": 50,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "state.compteur",
        "tools": null
      },
      "metadata": {
        "order": 50
      }
    },
    {
      "id": 311,
      "slug": "assistant-message-appel-prof-cp2",
      "kind": "assistant_message",
      "display_name": "Appel enseignant CP2",
      "agent_key": null,
      "parent_slug": null,
      "position": 51,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "La configuration r√©seau ne semble pas correcte. Ton enseignant va venir t'aider.\n\nEntre le code de l'enseignant pour continuer:",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 51
      }
    },
    {
      "id": 312,
      "slug": "wait-code-prof-cp2",
      "kind": "wait_for_user_input",
      "display_name": "Attente code enseignant CP2",
      "agent_key": null,
      "parent_slug": null,
      "position": 52,
      "is_enabled": true,
      "parameters": {
        "tools": null
      },
      "metadata": {
        "order": 52
      }
    },
    {
      "id": 313,
      "slug": "condition-code-prof-cp2",
      "kind": "condition",
      "display_name": "Code enseignant correct CP2?",
      "agent_key": null,
      "parent_slug": null,
      "position": 53,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.user_message",
        "tools": null
      },
      "metadata": {
        "order": 53
      }
    },
    {
      "id": 314,
      "slug": "agent-retroaction-cp2",
      "kind": "agent",
      "display_name": "R√©troaction CP2",
      "agent_key": null,
      "parent_slug": null,
      "position": 54,
      "is_enabled": true,
      "parameters": {
        "model": "gpt-5-nano",
        "instructions": "L'utilisateur doit coller la sortie de `ip -br a`. Aide-le √† v√©rifier qu'il a bien appliqu√© la configuration netplan avec `sudo netplan apply` et que la commande a √©t√© ex√©cut√©e correctement.",
        "model_provider": "openai",
        "model_settings": {
          "text": { "verbosity": "low" },
          "reasoning": { "effort": "low" },
          "include_chat_history": true
        },
        "model_provider_slug": "openai"
      },
      "metadata": {
        "order": 54
      }
    },
    {
      "id": 315,
      "slug": "assistant-message-cp2-ok",
      "kind": "assistant_message",
      "display_name": "Checkpoint IP OK",
      "agent_key": null,
      "parent_slug": null,
      "position": 55,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "‚úÖ Configuration r√©seau valid√©e!\n\nPassons √† la connexion SSH et au tunnel Cloudflare.",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 55
      }
    },
    {
      "id": 400,
      "slug": "assistant-message-section3",
      "kind": "assistant_message",
      "display_name": "Section 3: Cloudflare Tunnel",
      "agent_key": null,
      "parent_slug": null,
      "position": 60,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "## 3. Connexion √† distance via Cloudflare Tunnel\n\nCloudflare Tunnel cr√©e une **connexion sortante s√©curis√©e** de votre Raspberry Pi vers Cloudflare. **Aucun port √† ouvrir!**\n\n---\n\n### 3.1 Pr√©requis\n\n**Compte Cloudflare gratuit:**\n1. Cr√©er un compte sur https://dash.cloudflare.com/sign-up\n2. V√©rifier votre adresse courriel\n\n**Nom de domaine public:**\n\nVous devez obtenir un nom de domaine pour configurer le tunnel Cloudflare.\n\n**Options pour obtenir un domaine:**\n\n1. **Acheter un domaine sur Cloudflare** (√† partir de ~$10/an):\n   - Dans le tableau de bord Cloudflare, aller dans **Domain Registration**\n   - Rechercher un domaine disponible (ex: `votrenom.com`, `votrenom.ca`)\n   - Compl√©ter l'achat\n   - Le domaine sera automatiquement configur√© dans votre compte\n\n2. **Transf√©rer un domaine existant vers Cloudflare:**\n   - Si vous poss√©dez d√©j√† un domaine chez un autre registraire\n   - Suivre les instructions de transfert dans Cloudflare\n   - Le transfert prend g√©n√©ralement 5-7 jours\n\n3. **Utiliser un domaine existant sans transfert:**\n   - Garder le domaine chez votre registraire actuel\n   - Dans Cloudflare, cliquer sur **Add a Site**\n   - Entrer votre nom de domaine\n   - Changer les nameservers chez votre registraire pour pointer vers Cloudflare\n\n‚ö†Ô∏è **Important:** Un nom de domaine est obligatoire pour utiliser Cloudflare Tunnel. Pr√©voyez environ $10-15/an pour le co√ªt du domaine.\n\n---\n\n### 3.2 Installation de cloudflared\n\n**Sur le Raspberry Pi:**\n\n```bash\n# T√©l√©charger cloudflared pour ARM64\nwget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-arm64.deb\n\n# Installer le paquet\nsudo dpkg -i cloudflared-linux-arm64.deb\n\n# V√©rifier l'installation\ncloudflared --version\n```\n\n**R√©sultat attendu:**\n```\ncloudflared version 2024.x.x\n```\n\n---\n\n### 3.3 Authentification Cloudflare\n\n**1. Se connecter √† Cloudflare:**\n```bash\ncloudflared login\n```\n\nCette commande ouvre un lien dans le navigateur. Si vous √™tes en SSH:\n1. Copier l'URL affich√©e dans le terminal\n2. Ouvrir l'URL dans un navigateur sur votre PC\n3. S√©lectionner votre domaine et autoriser\n4. Le fichier de credentials sera automatiquement cr√©√©\n\n**2. Cr√©er le tunnel:**\n```bash\ncloudflared tunnel create rpi-ssh\n```\n\nNote l'**UUID du tunnel** affich√© (ex: `a1b2c3d4-e5f6-7890-abcd-ef1234567890`).\n\n---\n\n### 3.4 Configuration du tunnel\n\n**1. Cr√©er le fichier de configuration:**\n```bash\nmkdir -p ~/.cloudflared\nnano ~/.cloudflared/config.yml\n```\n\n**2. Contenu du fichier config.yml:**\n```yaml\ntunnel: <TON-UUID-ICI>\ncredentials-file: /home/<TON-USERNAME>/.cloudflared/<TON-UUID-ICI>.json\n\ningress:\n  - hostname: rpi.votredomaine.ca  # Remplacer par ton domaine\n    service: ssh://localhost:22\n  - service: http_status:404\n```\n\n‚ö†Ô∏è **Remplacer:**\n- `<TON-UUID-ICI>` par l'UUID de ton tunnel\n- `<TON-USERNAME>` par ton nom d'utilisateur Raspberry Pi\n- `rpi.votredomaine.ca` par ton domaine (ex: `rpi.mondomaine.com`)\n\n---\n\n### 3.5 Configuration DNS\n\n**Lier le tunnel au DNS:**\n```bash\ncloudflared tunnel route dns rpi-ssh rpi.votredomaine.ca\n```\n\nRemplacer `rpi.votredomaine.ca` par ton domaine.\n\n---\n\n### 3.6 D√©marrage du tunnel\n\n**1. Tester le tunnel:**\n```bash\ncloudflared tunnel run rpi-ssh\n```\n\nLe tunnel devrait d√©marrer sans erreurs. Appuyer sur Ctrl+C pour arr√™ter.\n\n**2. Installer comme service syst√®me:**\n```bash\nsudo cloudflared service install\nsudo systemctl start cloudflared\nsudo systemctl enable cloudflared\n```\n\n**3. V√©rifier le statut:**\n```bash\nsudo systemctl status cloudflared\n```\n\n---\n\n### 3.7 Configuration SSH locale (sur votre PC)\n\n**1. Installer cloudflared sur votre PC:**\n\n**Windows:**\n```powershell\nwinget install Cloudflare.cloudflared\n```\n\n**macOS:**\n```bash\nbrew install cloudflared\n```\n\n**Linux:**\n```bash\nwget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64.deb\nsudo dpkg -i cloudflared-linux-amd64.deb\n```\n\n**2. Configurer SSH (~/.ssh/config):**\n```\nHost rpi\n  HostName rpi.votredomaine.ca\n  User <TON-USERNAME>\n  ProxyCommand cloudflared access ssh --hostname %h\n```\n\nRemplacer:\n- `rpi.votredomaine.ca` par ton domaine\n- `<TON-USERNAME>` par ton nom d'utilisateur Raspberry Pi\n\n**3. Se connecter:**\n```bash\nssh rpi\n```\n\nSi tout fonctionne, tu devrais √™tre connect√© √† ton Raspberry Pi via le tunnel Cloudflare!\n\n---\n\nConfigure Cloudflare Tunnel en suivant toutes les √©tapes et dis-moi quand c'est fait!",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 60
      }
    },
    {
      "id": 401,
      "slug": "widget-section3-done",
      "kind": "widget",
      "display_name": "Tunnel configur√©?",
      "agent_key": null,
      "parent_slug": null,
      "position": 61,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "widget": {
          "slug": "pret-a-debuter",
          "source": "library",
          "variables": {
            "text": "Le tunnel Cloudflare est configur√© et je peux me connecter en SSH!"
          }
        }
      },
      "metadata": {
        "order": 61
      }
    },
    {
      "id": 402,
      "slug": "condition-section3-done",
      "kind": "condition",
      "display_name": "Tunnel configur√©?",
      "agent_key": null,
      "parent_slug": null,
      "position": 62,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.action.raw_payload.value.",
        "tools": null
      },
      "metadata": {
        "order": 62
      }
    },
    {
      "id": 403,
      "slug": "end-section3-abandon",
      "kind": "end",
      "display_name": "Fin - Abandon Section 3",
      "agent_key": null,
      "parent_slug": null,
      "position": 63,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "status": {
          "type": "closed",
          "reason": "√âtudiant a abandonn√©"
        },
        "message": "Reviens quand le tunnel sera configur√©!"
      },
      "metadata": {
        "order": 63
      }
    },
    {
      "id": 404,
      "slug": "assistant-message-checkpoint-tunnel",
      "kind": "assistant_message",
      "display_name": "Checkpoint: tunnel status",
      "agent_key": null,
      "parent_slug": null,
      "position": 64,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "### ‚úÖ Checkpoint technique\n\nTape la commande suivante et colle le r√©sultat:\n\n```bash\ncloudflared tunnel list\n```",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 64
      }
    },
    {
      "id": 405,
      "slug": "state-init-compteur-cp3",
      "kind": "state",
      "display_name": "Init compteur CP3",
      "agent_key": null,
      "parent_slug": null,
      "position": 65,
      "is_enabled": true,
      "parameters": {
        "state": [
          {
            "target": "state.compteur",
            "expression": "0"
          }
        ],
        "tools": null
      },
      "metadata": {
        "order": 65
      }
    },
    {
      "id": 406,
      "slug": "wait-reponse-cp3",
      "kind": "wait_for_user_input",
      "display_name": "Attente r√©ponse CP3",
      "agent_key": null,
      "parent_slug": null,
      "position": 66,
      "is_enabled": true,
      "parameters": {
        "tools": null
      },
      "metadata": {
        "order": 66
      }
    },
    {
      "id": 407,
      "slug": "agent-eval-cp3",
      "kind": "agent",
      "display_name": "√âvaluation checkpoint tunnel",
      "agent_key": null,
      "parent_slug": null,
      "position": 67,
      "is_enabled": true,
      "parameters": {
        "model": "gpt-5-nano",
        "instructions": "# R√¥le\nTu valides une sortie de commande. Produis uniquement un JSON strict.\n\n# Commande ex√©cut√©e\n`cloudflared tunnel list`\n\n# Crit√®res de validation\nLa sortie doit contenir:\n- Un UUID de tunnel (format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)\n- Un nom de tunnel (ex: rpi-ssh ou similaire)\n- Date de cr√©ation ou statut\n- Format tabulaire typique de cloudflared\n\n# R√®gles\n- Si sortie contient un tunnel valide ‚Üí `\"ok\": true`\n- Si \"You have no tunnels\" ou erreur ‚Üí `\"ok\": false`\n- Si sortie vide ou incoh√©rente ‚Üí `\"ok\": false`",
        "model_provider": "openai",
        "model_settings": {
          "text": { "verbosity": "low" },
          "reasoning": { "effort": "low" },
          "include_chat_history": true
        },
        "response_format": {
          "name": "workflow_output",
          "type": "json_schema",
          "schema": {
            "type": "object",
            "required": ["ok"],
            "properties": {
              "ok": { "type": "boolean" }
            }
          },
          "strict": true
        },
        "model_provider_slug": "openai"
      },
      "metadata": {
        "order": 67
      }
    },
    {
      "id": 408,
      "slug": "condition-eval-cp3",
      "kind": "condition",
      "display_name": "Checkpoint tunnel valide?",
      "agent_key": null,
      "parent_slug": null,
      "position": 68,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.output_structured.ok",
        "tools": null
      },
      "metadata": {
        "order": 68
      }
    },
    {
      "id": 409,
      "slug": "state-incr-compteur-cp3",
      "kind": "state",
      "display_name": "Incr√©mentation compteur CP3",
      "agent_key": null,
      "parent_slug": null,
      "position": 69,
      "is_enabled": true,
      "parameters": {
        "state": [
          {
            "target": "state.compteur",
            "expression": "(state.get('compteur', 0) or 0) + 1"
          }
        ],
        "tools": null
      },
      "metadata": {
        "order": 69
      }
    },
    {
      "id": 410,
      "slug": "condition-max-tentatives-cp3",
      "kind": "condition",
      "display_name": "Max tentatives CP3?",
      "agent_key": null,
      "parent_slug": null,
      "position": 70,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "state.compteur",
        "tools": null
      },
      "metadata": {
        "order": 70
      }
    },
    {
      "id": 411,
      "slug": "assistant-message-appel-prof-cp3",
      "kind": "assistant_message",
      "display_name": "Appel enseignant CP3",
      "agent_key": null,
      "parent_slug": null,
      "position": 71,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "Le tunnel ne semble pas configur√© correctement. Ton enseignant va venir t'aider.\n\nEntre le code de l'enseignant pour continuer:",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 71
      }
    },
    {
      "id": 412,
      "slug": "wait-code-prof-cp3",
      "kind": "wait_for_user_input",
      "display_name": "Attente code enseignant CP3",
      "agent_key": null,
      "parent_slug": null,
      "position": 72,
      "is_enabled": true,
      "parameters": {
        "tools": null
      },
      "metadata": {
        "order": 72
      }
    },
    {
      "id": 413,
      "slug": "condition-code-prof-cp3",
      "kind": "condition",
      "display_name": "Code enseignant correct CP3?",
      "agent_key": null,
      "parent_slug": null,
      "position": 73,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.user_message",
        "tools": null
      },
      "metadata": {
        "order": 73
      }
    },
    {
      "id": 414,
      "slug": "agent-retroaction-cp3",
      "kind": "agent",
      "display_name": "R√©troaction CP3",
      "agent_key": null,
      "parent_slug": null,
      "position": 74,
      "is_enabled": true,
      "parameters": {
        "model": "gpt-5-nano",
        "instructions": "L'utilisateur doit coller la sortie de `cloudflared tunnel list`. Aide-le √† v√©rifier qu'il a bien cr√©√© un tunnel avec `cloudflared tunnel create` et qu'il est authentifi√© avec `cloudflared login`.",
        "model_provider": "openai",
        "model_settings": {
          "text": { "verbosity": "low" },
          "reasoning": { "effort": "low" },
          "include_chat_history": true
        },
        "model_provider_slug": "openai"
      },
      "metadata": {
        "order": 74
      }
    },
    {
      "id": 415,
      "slug": "assistant-message-cp3-ok",
      "kind": "assistant_message",
      "display_name": "Checkpoint tunnel OK",
      "agent_key": null,
      "parent_slug": null,
      "position": 75,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "‚úÖ Tunnel Cloudflare configur√©!\n\nPassons √† la configuration de Git.",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 75
      }
    },
    {
      "id": 500,
      "slug": "assistant-message-section4",
      "kind": "assistant_message",
      "display_name": "Section 4: Configuration Git",
      "agent_key": null,
      "parent_slug": null,
      "position": 80,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "## 4. Configuration Git\n\n### 4.1 Cr√©ation du token GitHub\n\n1. Connectez-vous √† GitHub\n2. Allez dans **Settings ‚Üí Developer settings ‚Üí Personal access tokens ‚Üí Tokens (classic)**\n3. **Generate new token (classic)**\n4. Configurez:\n   - **Note:** `Raspberry Pi - 243-4J5-LI`\n   - **Expiration:** 90 days\n   - **Scopes:** Cochez `repo`\n5. **Copiez le token imm√©diatement!**\n\n### 4.2 Configuration sur le Raspberry Pi\n\n```bash\ngit config --global user.name \"Votre Nom\"\ngit config --global user.email \"votre.email@example.com\"\ngit config --global credential.helper store\n```\n\n### 4.3 Cloner le d√©p√¥t du cours\n\n```bash\ncd ~\ngit clone https://github.com/fpoisson2/243-4J5-LI.git\ncd 243-4J5-LI\n```\n\n### 4.4 Cr√©er votre branche\n\n```bash\ngit checkout -b prenom-nom/labo1\ngit push -u origin prenom-nom/labo1\n```\n\nConfigure Git et cr√©e ta branche, puis dis-moi quand c'est fait!",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 80
      }
    },
    {
      "id": 501,
      "slug": "widget-section4-done",
      "kind": "widget",
      "display_name": "Git configur√©?",
      "agent_key": null,
      "parent_slug": null,
      "position": 81,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "widget": {
          "slug": "pret-a-debuter",
          "source": "library",
          "variables": {
            "text": "Git est configur√© et ma branche est cr√©√©e!"
          }
        }
      },
      "metadata": {
        "order": 81
      }
    },
    {
      "id": 502,
      "slug": "condition-section4-done",
      "kind": "condition",
      "display_name": "Git configur√©?",
      "agent_key": null,
      "parent_slug": null,
      "position": 82,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.action.raw_payload.value.",
        "tools": null
      },
      "metadata": {
        "order": 82
      }
    },
    {
      "id": 503,
      "slug": "end-section4-abandon",
      "kind": "end",
      "display_name": "Fin - Abandon Section 4",
      "agent_key": null,
      "parent_slug": null,
      "position": 83,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "status": {
          "type": "closed",
          "reason": "√âtudiant a abandonn√©"
        },
        "message": "Reviens quand Git sera configur√©!"
      },
      "metadata": {
        "order": 83
      }
    },
    {
      "id": 504,
      "slug": "assistant-message-checkpoint-git",
      "kind": "assistant_message",
      "display_name": "Checkpoint: git branch",
      "agent_key": null,
      "parent_slug": null,
      "position": 84,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "### ‚úÖ Checkpoint technique\n\nTape la commande suivante dans le dossier du projet et colle le r√©sultat:\n\n```bash\ncd ~/243-4J5-LI && git branch -vv\n```",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 84
      }
    },
    {
      "id": 505,
      "slug": "state-init-compteur-cp4",
      "kind": "state",
      "display_name": "Init compteur CP4",
      "agent_key": null,
      "parent_slug": null,
      "position": 85,
      "is_enabled": true,
      "parameters": {
        "state": [
          {
            "target": "state.compteur",
            "expression": "0"
          }
        ],
        "tools": null
      },
      "metadata": {
        "order": 85
      }
    },
    {
      "id": 506,
      "slug": "wait-reponse-cp4",
      "kind": "wait_for_user_input",
      "display_name": "Attente r√©ponse CP4",
      "agent_key": null,
      "parent_slug": null,
      "position": 86,
      "is_enabled": true,
      "parameters": {
        "tools": null
      },
      "metadata": {
        "order": 86
      }
    },
    {
      "id": 507,
      "slug": "agent-eval-cp4",
      "kind": "agent",
      "display_name": "√âvaluation checkpoint git",
      "agent_key": null,
      "parent_slug": null,
      "position": 87,
      "is_enabled": true,
      "parameters": {
        "model": "gpt-5-nano",
        "instructions": "# R√¥le\nTu valides une sortie de commande. Produis uniquement un JSON strict.\n\n# Commande ex√©cut√©e\n`git branch -vv`\n\n# Crit√®res de validation\nLa sortie doit contenir:\n- Une branche avec format `prenom-nom/labo1` ou similaire (pas juste main)\n- Un ast√©risque (*) indiquant la branche active\n- Une r√©f√©rence au remote [origin/...] indiquant le tracking\n- Un hash de commit\n\n# R√®gles\n- Si branche personnelle existe et est track√©e ‚Üí `\"ok\": true`\n- Si seulement main ou pas de branche personnelle ‚Üí `\"ok\": false`\n- Si sortie vide ou erreur ‚Üí `\"ok\": false`",
        "model_provider": "openai",
        "model_settings": {
          "text": { "verbosity": "low" },
          "reasoning": { "effort": "low" },
          "include_chat_history": true
        },
        "response_format": {
          "name": "workflow_output",
          "type": "json_schema",
          "schema": {
            "type": "object",
            "required": ["ok"],
            "properties": {
              "ok": { "type": "boolean" }
            }
          },
          "strict": true
        },
        "model_provider_slug": "openai"
      },
      "metadata": {
        "order": 87
      }
    },
    {
      "id": 508,
      "slug": "condition-eval-cp4",
      "kind": "condition",
      "display_name": "Checkpoint git valide?",
      "agent_key": null,
      "parent_slug": null,
      "position": 88,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.output_structured.ok",
        "tools": null
      },
      "metadata": {
        "order": 88
      }
    },
    {
      "id": 509,
      "slug": "state-incr-compteur-cp4",
      "kind": "state",
      "display_name": "Incr√©mentation compteur CP4",
      "agent_key": null,
      "parent_slug": null,
      "position": 89,
      "is_enabled": true,
      "parameters": {
        "state": [
          {
            "target": "state.compteur",
            "expression": "(state.get('compteur', 0) or 0) + 1"
          }
        ],
        "tools": null
      },
      "metadata": {
        "order": 89
      }
    },
    {
      "id": 510,
      "slug": "condition-max-tentatives-cp4",
      "kind": "condition",
      "display_name": "Max tentatives CP4?",
      "agent_key": null,
      "parent_slug": null,
      "position": 90,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "state.compteur",
        "tools": null
      },
      "metadata": {
        "order": 90
      }
    },
    {
      "id": 511,
      "slug": "assistant-message-appel-prof-cp4",
      "kind": "assistant_message",
      "display_name": "Appel enseignant CP4",
      "agent_key": null,
      "parent_slug": null,
      "position": 91,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "La branche Git ne semble pas configur√©e correctement. Ton enseignant va venir t'aider.\n\nEntre le code de l'enseignant pour continuer:",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 91
      }
    },
    {
      "id": 512,
      "slug": "wait-code-prof-cp4",
      "kind": "wait_for_user_input",
      "display_name": "Attente code enseignant CP4",
      "agent_key": null,
      "parent_slug": null,
      "position": 92,
      "is_enabled": true,
      "parameters": {
        "tools": null
      },
      "metadata": {
        "order": 92
      }
    },
    {
      "id": 513,
      "slug": "condition-code-prof-cp4",
      "kind": "condition",
      "display_name": "Code enseignant correct CP4?",
      "agent_key": null,
      "parent_slug": null,
      "position": 93,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.user_message",
        "tools": null
      },
      "metadata": {
        "order": 93
      }
    },
    {
      "id": 514,
      "slug": "agent-retroaction-cp4",
      "kind": "agent",
      "display_name": "R√©troaction CP4",
      "agent_key": null,
      "parent_slug": null,
      "position": 94,
      "is_enabled": true,
      "parameters": {
        "model": "gpt-5-nano",
        "instructions": "L'utilisateur doit coller la sortie de `git branch -vv`. Aide-le √† v√©rifier qu'il a bien cr√©√© sa branche avec `git checkout -b prenom-nom/labo1` et qu'il l'a pouss√©e avec `git push -u origin prenom-nom/labo1`.",
        "model_provider": "openai",
        "model_settings": {
          "text": { "verbosity": "low" },
          "reasoning": { "effort": "low" },
          "include_chat_history": true
        },
        "model_provider_slug": "openai"
      },
      "metadata": {
        "order": 94
      }
    },
    {
      "id": 515,
      "slug": "assistant-message-cp4-ok",
      "kind": "assistant_message",
      "display_name": "Checkpoint git OK",
      "agent_key": null,
      "parent_slug": null,
      "position": 95,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "‚úÖ Git et branche configur√©s!\n\nPassons √† l'installation de Node.js et Arduino CLI.",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 95
      }
    },
    {
      "id": 600,
      "slug": "assistant-message-section5",
      "kind": "assistant_message",
      "display_name": "Section 5: Node.js et Arduino CLI",
      "agent_key": null,
      "parent_slug": null,
      "position": 100,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "## 5. Installation Node.js et Arduino CLI\n\n### 5.1 Installation NVM et Node.js\n\n```bash\ncurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash\nsource ~/.bashrc\nnvm install 22\nnvm use 22\n```\n\n### 5.2 Installation Arduino CLI\n\n```bash\ncd ~\ncurl -fsSL https://raw.githubusercontent.com/arduino/arduino-cli/master/install.sh | sh\necho 'export PATH=$PATH:$HOME/bin' >> ~/.bashrc\nsource ~/.bashrc\narduino-cli config init\narduino-cli core update-index\n```\n\n### 5.3 Configuration ESP32\n\n```bash\narduino-cli config add board_manager.additional_urls https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json\narduino-cli core update-index\narduino-cli core install esp32:esp32\n```\n\nInstalle Node.js et Arduino CLI, puis dis-moi quand c'est fait!",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 100
      }
    },
    {
      "id": 601,
      "slug": "widget-section5-done",
      "kind": "widget",
      "display_name": "Outils install√©s?",
      "agent_key": null,
      "parent_slug": null,
      "position": 101,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "widget": {
          "slug": "pret-a-debuter",
          "source": "library",
          "variables": {
            "text": "Node.js et Arduino CLI sont install√©s!"
          }
        }
      },
      "metadata": {
        "order": 101
      }
    },
    {
      "id": 602,
      "slug": "condition-section5-done",
      "kind": "condition",
      "display_name": "Outils install√©s?",
      "agent_key": null,
      "parent_slug": null,
      "position": 102,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.action.raw_payload.value.",
        "tools": null
      },
      "metadata": {
        "order": 102
      }
    },
    {
      "id": 603,
      "slug": "end-section5-abandon",
      "kind": "end",
      "display_name": "Fin - Abandon Section 5",
      "agent_key": null,
      "parent_slug": null,
      "position": 103,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "status": {
          "type": "closed",
          "reason": "√âtudiant a abandonn√©"
        },
        "message": "Reviens quand les outils seront install√©s!"
      },
      "metadata": {
        "order": 103
      }
    },
    {
      "id": 604,
      "slug": "assistant-message-checkpoint-tools",
      "kind": "assistant_message",
      "display_name": "Checkpoint: versions",
      "agent_key": null,
      "parent_slug": null,
      "position": 104,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "### ‚úÖ Checkpoint technique\n\nTape les commandes suivantes et colle le r√©sultat:\n\n```bash\nnode -v && arduino-cli version\n```",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 104
      }
    },
    {
      "id": 605,
      "slug": "state-init-compteur-cp5",
      "kind": "state",
      "display_name": "Init compteur CP5",
      "agent_key": null,
      "parent_slug": null,
      "position": 105,
      "is_enabled": true,
      "parameters": {
        "state": [
          {
            "target": "state.compteur",
            "expression": "0"
          }
        ],
        "tools": null
      },
      "metadata": {
        "order": 105
      }
    },
    {
      "id": 606,
      "slug": "wait-reponse-cp5",
      "kind": "wait_for_user_input",
      "display_name": "Attente r√©ponse CP5",
      "agent_key": null,
      "parent_slug": null,
      "position": 106,
      "is_enabled": true,
      "parameters": {
        "tools": null
      },
      "metadata": {
        "order": 106
      }
    },
    {
      "id": 607,
      "slug": "agent-eval-cp5",
      "kind": "agent",
      "display_name": "√âvaluation checkpoint tools",
      "agent_key": null,
      "parent_slug": null,
      "position": 107,
      "is_enabled": true,
      "parameters": {
        "model": "gpt-5-nano",
        "instructions": "# R√¥le\nTu valides une sortie de commande. Produis uniquement un JSON strict.\n\n# Commande ex√©cut√©e\n`node -v && arduino-cli version`\n\n# Crit√®res de validation\nLa sortie doit contenir:\n- Version de Node.js (format vXX.X.X, id√©alement v22.x.x)\n- Version d'Arduino CLI (format arduino-cli Version: X.X.X)\n\n# R√®gles\n- Si les deux versions sont pr√©sentes ‚Üí `\"ok\": true`\n- Si une version manque ou erreur ‚Üí `\"ok\": false`",
        "model_provider": "openai",
        "model_settings": {
          "text": { "verbosity": "low" },
          "reasoning": { "effort": "low" },
          "include_chat_history": true
        },
        "response_format": {
          "name": "workflow_output",
          "type": "json_schema",
          "schema": {
            "type": "object",
            "required": ["ok"],
            "properties": {
              "ok": { "type": "boolean" }
            }
          },
          "strict": true
        },
        "model_provider_slug": "openai"
      },
      "metadata": {
        "order": 107
      }
    },
    {
      "id": 608,
      "slug": "condition-eval-cp5",
      "kind": "condition",
      "display_name": "Checkpoint tools valide?",
      "agent_key": null,
      "parent_slug": null,
      "position": 108,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.output_structured.ok",
        "tools": null
      },
      "metadata": {
        "order": 108
      }
    },
    {
      "id": 609,
      "slug": "state-incr-compteur-cp5",
      "kind": "state",
      "display_name": "Incr√©mentation compteur CP5",
      "agent_key": null,
      "parent_slug": null,
      "position": 109,
      "is_enabled": true,
      "parameters": {
        "state": [
          {
            "target": "state.compteur",
            "expression": "(state.get('compteur', 0) or 0) + 1"
          }
        ],
        "tools": null
      },
      "metadata": {
        "order": 109
      }
    },
    {
      "id": 610,
      "slug": "condition-max-tentatives-cp5",
      "kind": "condition",
      "display_name": "Max tentatives CP5?",
      "agent_key": null,
      "parent_slug": null,
      "position": 110,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "state.compteur",
        "tools": null
      },
      "metadata": {
        "order": 110
      }
    },
    {
      "id": 611,
      "slug": "assistant-message-appel-prof-cp5",
      "kind": "assistant_message",
      "display_name": "Appel enseignant CP5",
      "agent_key": null,
      "parent_slug": null,
      "position": 111,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "Les outils ne semblent pas install√©s correctement. Ton enseignant va venir t'aider.\n\nEntre le code de l'enseignant pour continuer:",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 111
      }
    },
    {
      "id": 612,
      "slug": "wait-code-prof-cp5",
      "kind": "wait_for_user_input",
      "display_name": "Attente code enseignant CP5",
      "agent_key": null,
      "parent_slug": null,
      "position": 112,
      "is_enabled": true,
      "parameters": {
        "tools": null
      },
      "metadata": {
        "order": 112
      }
    },
    {
      "id": 613,
      "slug": "condition-code-prof-cp5",
      "kind": "condition",
      "display_name": "Code enseignant correct CP5?",
      "agent_key": null,
      "parent_slug": null,
      "position": 113,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.user_message",
        "tools": null
      },
      "metadata": {
        "order": 113
      }
    },
    {
      "id": 614,
      "slug": "agent-retroaction-cp5",
      "kind": "agent",
      "display_name": "R√©troaction CP5",
      "agent_key": null,
      "parent_slug": null,
      "position": 114,
      "is_enabled": true,
      "parameters": {
        "model": "gpt-5-nano",
        "instructions": "L'utilisateur doit coller la sortie de `node -v && arduino-cli version`. Aide-le √† v√©rifier qu'il a bien install√© NVM, Node.js 22, et Arduino CLI avec les commandes appropri√©es.",
        "model_provider": "openai",
        "model_settings": {
          "text": { "verbosity": "low" },
          "reasoning": { "effort": "low" },
          "include_chat_history": true
        },
        "model_provider_slug": "openai"
      },
      "metadata": {
        "order": 114
      }
    },
    {
      "id": 615,
      "slug": "assistant-message-cp5-ok",
      "kind": "assistant_message",
      "display_name": "Checkpoint tools OK",
      "agent_key": null,
      "parent_slug": null,
      "position": 115,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "‚úÖ Node.js et Arduino CLI install√©s!\n\nPassons au test final avec le LilyGO.",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 115
      }
    },
    {
      "id": 700,
      "slug": "assistant-message-section6",
      "kind": "assistant_message",
      "display_name": "Section 6: Test LilyGO",
      "agent_key": null,
      "parent_slug": null,
      "position": 120,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "## 6. Test du LilyGO A7670G\n\n### 6.1 Connexion du LilyGO\n\n1. Branchez le c√¢ble USB-A vers USB-C entre le Raspberry Pi et le LilyGO\n2. V√©rifiez la connexion:\n```bash\narduino-cli board list\n```\n\n### 6.2 Programme de test\n\nCr√©ez le sketch:\n```bash\nmkdir -p ~/243-4J5-LI/labo/Labo-01/lilygo-test\ncd ~/243-4J5-LI/labo/Labo-01/lilygo-test\nnano lilygo-test.ino\n```\n\nCode:\n```cpp\n#define LED_PIN 12\n\nvoid setup() {\n  Serial.begin(115200);\n  delay(1000);\n  pinMode(LED_PIN, OUTPUT);\n  Serial.println(\"LilyGO A7670G - Test\");\n}\n\nvoid loop() {\n  digitalWrite(LED_PIN, HIGH);\n  Serial.println(\"LED ON\");\n  delay(1000);\n  digitalWrite(LED_PIN, LOW);\n  Serial.println(\"LED OFF\");\n  delay(1000);\n}\n```\n\n### 6.3 Compilation et t√©l√©versement\n\n```bash\narduino-cli compile --fqbn esp32:esp32:esp32 lilygo-test.ino\narduino-cli upload -p /dev/ttyUSB0 --fqbn esp32:esp32:esp32 lilygo-test.ino\narduino-cli monitor -p /dev/ttyUSB0 -c baudrate=115200\n```\n\nBranche ton LilyGO et t√©l√©verse le programme de test!",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 120
      }
    },
    {
      "id": 701,
      "slug": "widget-section6-done",
      "kind": "widget",
      "display_name": "LilyGO test√©?",
      "agent_key": null,
      "parent_slug": null,
      "position": 121,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "widget": {
          "slug": "pret-a-debuter",
          "source": "library",
          "variables": {
            "text": "Le programme est t√©l√©vers√© et la LED clignote!"
          }
        }
      },
      "metadata": {
        "order": 121
      }
    },
    {
      "id": 702,
      "slug": "condition-section6-done",
      "kind": "condition",
      "display_name": "LilyGO test√©?",
      "agent_key": null,
      "parent_slug": null,
      "position": 122,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.action.raw_payload.value.",
        "tools": null
      },
      "metadata": {
        "order": 122
      }
    },
    {
      "id": 703,
      "slug": "end-section6-abandon",
      "kind": "end",
      "display_name": "Fin - Abandon Section 6",
      "agent_key": null,
      "parent_slug": null,
      "position": 123,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "status": {
          "type": "closed",
          "reason": "√âtudiant a abandonn√©"
        },
        "message": "Reviens quand le LilyGO sera test√©!"
      },
      "metadata": {
        "order": 123
      }
    },
    {
      "id": 704,
      "slug": "assistant-message-checkpoint-lilygo",
      "kind": "assistant_message",
      "display_name": "Checkpoint: board list",
      "agent_key": null,
      "parent_slug": null,
      "position": 124,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "### ‚úÖ Checkpoint technique\n\nTape la commande suivante et colle le r√©sultat:\n\n```bash\narduino-cli board list\n```",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 124
      }
    },
    {
      "id": 705,
      "slug": "state-init-compteur-cp6",
      "kind": "state",
      "display_name": "Init compteur CP6",
      "agent_key": null,
      "parent_slug": null,
      "position": 125,
      "is_enabled": true,
      "parameters": {
        "state": [
          {
            "target": "state.compteur",
            "expression": "0"
          }
        ],
        "tools": null
      },
      "metadata": {
        "order": 125
      }
    },
    {
      "id": 706,
      "slug": "wait-reponse-cp6",
      "kind": "wait_for_user_input",
      "display_name": "Attente r√©ponse CP6",
      "agent_key": null,
      "parent_slug": null,
      "position": 126,
      "is_enabled": true,
      "parameters": {
        "tools": null
      },
      "metadata": {
        "order": 126
      }
    },
    {
      "id": 707,
      "slug": "agent-eval-cp6",
      "kind": "agent",
      "display_name": "√âvaluation checkpoint LilyGO",
      "agent_key": null,
      "parent_slug": null,
      "position": 127,
      "is_enabled": true,
      "parameters": {
        "model": "gpt-5-nano",
        "instructions": "# R√¥le\nTu valides une sortie de commande. Produis uniquement un JSON strict.\n\n# Commande ex√©cut√©e\n`arduino-cli board list`\n\n# Crit√®res de validation\nLa sortie doit contenir:\n- Un port s√©rie (ex: /dev/ttyUSB0, /dev/ttyACM0, ou COM*)\n- Une indication de board ESP32 ou Unknown\n- Format tabulaire typique d'arduino-cli\n\n# R√®gles\n- Si un port s√©rie est d√©tect√© ‚Üí `\"ok\": true`\n- Si \"No boards found\" ou vide ‚Üí `\"ok\": false`",
        "model_provider": "openai",
        "model_settings": {
          "text": { "verbosity": "low" },
          "reasoning": { "effort": "low" },
          "include_chat_history": true
        },
        "response_format": {
          "name": "workflow_output",
          "type": "json_schema",
          "schema": {
            "type": "object",
            "required": ["ok"],
            "properties": {
              "ok": { "type": "boolean" }
            }
          },
          "strict": true
        },
        "model_provider_slug": "openai"
      },
      "metadata": {
        "order": 127
      }
    },
    {
      "id": 708,
      "slug": "condition-eval-cp6",
      "kind": "condition",
      "display_name": "Checkpoint LilyGO valide?",
      "agent_key": null,
      "parent_slug": null,
      "position": 128,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.output_structured.ok",
        "tools": null
      },
      "metadata": {
        "order": 128
      }
    },
    {
      "id": 709,
      "slug": "state-incr-compteur-cp6",
      "kind": "state",
      "display_name": "Incr√©mentation compteur CP6",
      "agent_key": null,
      "parent_slug": null,
      "position": 129,
      "is_enabled": true,
      "parameters": {
        "state": [
          {
            "target": "state.compteur",
            "expression": "(state.get('compteur', 0) or 0) + 1"
          }
        ],
        "tools": null
      },
      "metadata": {
        "order": 129
      }
    },
    {
      "id": 710,
      "slug": "condition-max-tentatives-cp6",
      "kind": "condition",
      "display_name": "Max tentatives CP6?",
      "agent_key": null,
      "parent_slug": null,
      "position": 130,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "state.compteur",
        "tools": null
      },
      "metadata": {
        "order": 130
      }
    },
    {
      "id": 711,
      "slug": "assistant-message-appel-prof-cp6",
      "kind": "assistant_message",
      "display_name": "Appel enseignant CP6",
      "agent_key": null,
      "parent_slug": null,
      "position": 131,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "Le LilyGO ne semble pas d√©tect√©. V√©rifie le c√¢ble USB et les permissions.\n\nTon enseignant va venir t'aider. Entre le code de l'enseignant pour continuer:",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 131
      }
    },
    {
      "id": 712,
      "slug": "wait-code-prof-cp6",
      "kind": "wait_for_user_input",
      "display_name": "Attente code enseignant CP6",
      "agent_key": null,
      "parent_slug": null,
      "position": 132,
      "is_enabled": true,
      "parameters": {
        "tools": null
      },
      "metadata": {
        "order": 132
      }
    },
    {
      "id": 713,
      "slug": "condition-code-prof-cp6",
      "kind": "condition",
      "display_name": "Code enseignant correct CP6?",
      "agent_key": null,
      "parent_slug": null,
      "position": 133,
      "is_enabled": true,
      "parameters": {
        "mode": "value",
        "path": "input.user_message",
        "tools": null
      },
      "metadata": {
        "order": 133
      }
    },
    {
      "id": 714,
      "slug": "agent-retroaction-cp6",
      "kind": "agent",
      "display_name": "R√©troaction CP6",
      "agent_key": null,
      "parent_slug": null,
      "position": 134,
      "is_enabled": true,
      "parameters": {
        "model": "gpt-5-nano",
        "instructions": "L'utilisateur doit coller la sortie de `arduino-cli board list`. Aide-le √† v√©rifier que le LilyGO est bien branch√© et que les permissions sont correctes (`sudo usermod -a -G dialout $USER`).",
        "model_provider": "openai",
        "model_settings": {
          "text": { "verbosity": "low" },
          "reasoning": { "effort": "low" },
          "include_chat_history": true
        },
        "model_provider_slug": "openai"
      },
      "metadata": {
        "order": 134
      }
    },
    {
      "id": 715,
      "slug": "assistant-message-cp6-ok",
      "kind": "assistant_message",
      "display_name": "Checkpoint LilyGO OK",
      "agent_key": null,
      "parent_slug": null,
      "position": 135,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "‚úÖ LilyGO d√©tect√© et pr√™t √† programmer!",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 135
      }
    },
    {
      "id": 900,
      "slug": "assistant-message-fin",
      "kind": "assistant_message",
      "display_name": "Fin du laboratoire",
      "agent_key": null,
      "parent_slug": null,
      "position": 200,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "message": "## üéâ F√©licitations!\n\nTu as termin√© le Laboratoire 1!\n\n### R√©capitulatif\n\nTu as configur√©:\n- ‚úÖ Ubuntu Server sur Raspberry Pi 5\n- ‚úÖ Configuration r√©seau (IP statique)\n- ‚úÖ Tunnel Cloudflare pour acc√®s distant s√©curis√©\n- ‚úÖ Git et ta branche personnelle\n- ‚úÖ Node.js et Arduino CLI\n- ‚úÖ Communication avec le LilyGO A7670G\n\n### Prochaines √©tapes\n\nAu prochain laboratoire, tu vas:\n- Configurer le protocole MQTT\n- Faire communiquer le LilyGO via WiFi puis LTE\n- Cr√©er un syst√®me IoT complet!\n\n**N'oublie pas de committer ton travail:**\n```bash\ncd ~/243-4J5-LI\ngit add .\ngit commit -m \"Labo 1 termin√©\"\ngit push origin prenom-nom/labo1\n```",
        "simulate_stream_delay_ms": 5
      },
      "metadata": {
        "order": 200
      }
    },
    {
      "id": 901,
      "slug": "end-success",
      "kind": "end",
      "display_name": "Fin - Succ√®s",
      "agent_key": null,
      "parent_slug": null,
      "position": 201,
      "is_enabled": true,
      "parameters": {
        "tools": null,
        "status": {
          "type": "success",
          "reason": "Laboratoire compl√©t√©"
        },
        "message": "Laboratoire 1 termin√© avec succ√®s!"
      },
      "metadata": {
        "order": 201
      }
    }
  ],
  "edges": [
    {
      "id": 1001,
      "source": "start",
      "target": "assistant-message-intro",
      "condition": null,
      "metadata": { "order": 1 }
    },
    {
      "id": 1002,
      "source": "assistant-message-intro",
      "target": "widget-pret-materiel",
      "condition": null,
      "metadata": { "order": 2 }
    },
    {
      "id": 1003,
      "source": "widget-pret-materiel",
      "target": "condition-pret-materiel",
      "condition": null,
      "metadata": { "order": 3 }
    },
    {
      "id": 1004,
      "source": "condition-pret-materiel",
      "target": "assistant-message-section1",
      "condition": "true",
      "metadata": { "label": "true", "order": 4 }
    },
    {
      "id": 1005,
      "source": "condition-pret-materiel",
      "target": "end-abandon-materiel",
      "condition": null,
      "metadata": { "label": "default", "order": 5 }
    },
    {
      "id": 1010,
      "source": "assistant-message-section1",
      "target": "widget-section1-done",
      "condition": null,
      "metadata": { "order": 10 }
    },
    {
      "id": 1011,
      "source": "widget-section1-done",
      "target": "condition-section1-done",
      "condition": null,
      "metadata": { "order": 11 }
    },
    {
      "id": 1012,
      "source": "condition-section1-done",
      "target": "assistant-message-checkpoint-hostname",
      "condition": "true",
      "metadata": { "label": "true", "order": 12 }
    },
    {
      "id": 1013,
      "source": "condition-section1-done",
      "target": "end-section1-abandon",
      "condition": null,
      "metadata": { "label": "default", "order": 13 }
    },
    {
      "id": 1020,
      "source": "assistant-message-checkpoint-hostname",
      "target": "state-init-compteur-cp1",
      "condition": null,
      "metadata": { "order": 20 }
    },
    {
      "id": 1021,
      "source": "state-init-compteur-cp1",
      "target": "wait-reponse-cp1",
      "condition": null,
      "metadata": { "order": 21 }
    },
    {
      "id": 1022,
      "source": "wait-reponse-cp1",
      "target": "agent-eval-cp1",
      "condition": null,
      "metadata": { "order": 22 }
    },
    {
      "id": 1023,
      "source": "agent-eval-cp1",
      "target": "condition-eval-cp1",
      "condition": null,
      "metadata": { "order": 23 }
    },
    {
      "id": 1024,
      "source": "condition-eval-cp1",
      "target": "assistant-message-cp1-ok",
      "condition": "true",
      "metadata": { "label": "true", "order": 24 }
    },
    {
      "id": 1025,
      "source": "condition-eval-cp1",
      "target": "state-incr-compteur-cp1",
      "condition": "false",
      "metadata": { "label": "false", "order": 25 }
    },
    {
      "id": 1026,
      "source": "state-incr-compteur-cp1",
      "target": "condition-max-tentatives-cp1",
      "condition": null,
      "metadata": { "order": 26 }
    },
    {
      "id": 1027,
      "source": "condition-max-tentatives-cp1",
      "target": "assistant-message-appel-prof-cp1",
      "condition": "3",
      "metadata": { "label": ">=3", "order": 27 }
    },
    {
      "id": 1028,
      "source": "condition-max-tentatives-cp1",
      "target": "agent-retroaction-cp1",
      "condition": null,
      "metadata": { "label": "default", "order": 28 }
    },
    {
      "id": 1029,
      "source": "agent-retroaction-cp1",
      "target": "wait-reponse-cp1",
      "condition": null,
      "metadata": { "order": 29 }
    },
    {
      "id": 1030,
      "source": "assistant-message-appel-prof-cp1",
      "target": "wait-code-prof-cp1",
      "condition": null,
      "metadata": { "order": 30 }
    },
    {
      "id": 1031,
      "source": "wait-code-prof-cp1",
      "target": "condition-code-prof-cp1",
      "condition": null,
      "metadata": { "order": 31 }
    },
    {
      "id": 1032,
      "source": "condition-code-prof-cp1",
      "target": "assistant-message-cp1-ok",
      "condition": "prof2024",
      "metadata": { "label": "code_ok", "order": 32 }
    },
    {
      "id": 1033,
      "source": "condition-code-prof-cp1",
      "target": "wait-code-prof-cp1",
      "condition": null,
      "metadata": { "label": "default", "order": 33 }
    },
    {
      "id": 1040,
      "source": "assistant-message-cp1-ok",
      "target": "assistant-message-section2",
      "condition": null,
      "metadata": { "order": 40 }
    },
    {
      "id": 1050,
      "source": "assistant-message-section2",
      "target": "widget-section2-done",
      "condition": null,
      "metadata": { "order": 50 }
    },
    {
      "id": 1051,
      "source": "widget-section2-done",
      "target": "condition-section2-done",
      "condition": null,
      "metadata": { "order": 51 }
    },
    {
      "id": 1052,
      "source": "condition-section2-done",
      "target": "assistant-message-checkpoint-ip",
      "condition": "true",
      "metadata": { "label": "true", "order": 52 }
    },
    {
      "id": 1053,
      "source": "condition-section2-done",
      "target": "end-section2-abandon",
      "condition": null,
      "metadata": { "label": "default", "order": 53 }
    },
    {
      "id": 1060,
      "source": "assistant-message-checkpoint-ip",
      "target": "state-init-compteur-cp2",
      "condition": null,
      "metadata": { "order": 60 }
    },
    {
      "id": 1061,
      "source": "state-init-compteur-cp2",
      "target": "wait-reponse-cp2",
      "condition": null,
      "metadata": { "order": 61 }
    },
    {
      "id": 1062,
      "source": "wait-reponse-cp2",
      "target": "agent-eval-cp2",
      "condition": null,
      "metadata": { "order": 62 }
    },
    {
      "id": 1063,
      "source": "agent-eval-cp2",
      "target": "condition-eval-cp2",
      "condition": null,
      "metadata": { "order": 63 }
    },
    {
      "id": 1064,
      "source": "condition-eval-cp2",
      "target": "assistant-message-cp2-ok",
      "condition": "true",
      "metadata": { "label": "true", "order": 64 }
    },
    {
      "id": 1065,
      "source": "condition-eval-cp2",
      "target": "state-incr-compteur-cp2",
      "condition": "false",
      "metadata": { "label": "false", "order": 65 }
    },
    {
      "id": 1066,
      "source": "state-incr-compteur-cp2",
      "target": "condition-max-tentatives-cp2",
      "condition": null,
      "metadata": { "order": 66 }
    },
    {
      "id": 1067,
      "source": "condition-max-tentatives-cp2",
      "target": "assistant-message-appel-prof-cp2",
      "condition": "3",
      "metadata": { "label": ">=3", "order": 67 }
    },
    {
      "id": 1068,
      "source": "condition-max-tentatives-cp2",
      "target": "agent-retroaction-cp2",
      "condition": null,
      "metadata": { "label": "default", "order": 68 }
    },
    {
      "id": 1069,
      "source": "agent-retroaction-cp2",
      "target": "wait-reponse-cp2",
      "condition": null,
      "metadata": { "order": 69 }
    },
    {
      "id": 1070,
      "source": "assistant-message-appel-prof-cp2",
      "target": "wait-code-prof-cp2",
      "condition": null,
      "metadata": { "order": 70 }
    },
    {
      "id": 1071,
      "source": "wait-code-prof-cp2",
      "target": "condition-code-prof-cp2",
      "condition": null,
      "metadata": { "order": 71 }
    },
    {
      "id": 1072,
      "source": "condition-code-prof-cp2",
      "target": "assistant-message-cp2-ok",
      "condition": "prof2024",
      "metadata": { "label": "code_ok", "order": 72 }
    },
    {
      "id": 1073,
      "source": "condition-code-prof-cp2",
      "target": "wait-code-prof-cp2",
      "condition": null,
      "metadata": { "label": "default", "order": 73 }
    },
    {
      "id": 1080,
      "source": "assistant-message-cp2-ok",
      "target": "assistant-message-section3",
      "condition": null,
      "metadata": { "order": 80 }
    },
    {
      "id": 1090,
      "source": "assistant-message-section3",
      "target": "widget-section3-done",
      "condition": null,
      "metadata": { "order": 90 }
    },
    {
      "id": 1091,
      "source": "widget-section3-done",
      "target": "condition-section3-done",
      "condition": null,
      "metadata": { "order": 91 }
    },
    {
      "id": 1092,
      "source": "condition-section3-done",
      "target": "assistant-message-checkpoint-tunnel",
      "condition": "true",
      "metadata": { "label": "true", "order": 92 }
    },
    {
      "id": 1093,
      "source": "condition-section3-done",
      "target": "end-section3-abandon",
      "condition": null,
      "metadata": { "label": "default", "order": 93 }
    },
    {
      "id": 1100,
      "source": "assistant-message-checkpoint-tunnel",
      "target": "state-init-compteur-cp3",
      "condition": null,
      "metadata": { "order": 100 }
    },
    {
      "id": 1101,
      "source": "state-init-compteur-cp3",
      "target": "wait-reponse-cp3",
      "condition": null,
      "metadata": { "order": 101 }
    },
    {
      "id": 1102,
      "source": "wait-reponse-cp3",
      "target": "agent-eval-cp3",
      "condition": null,
      "metadata": { "order": 102 }
    },
    {
      "id": 1103,
      "source": "agent-eval-cp3",
      "target": "condition-eval-cp3",
      "condition": null,
      "metadata": { "order": 103 }
    },
    {
      "id": 1104,
      "source": "condition-eval-cp3",
      "target": "assistant-message-cp3-ok",
      "condition": "true",
      "metadata": { "label": "true", "order": 104 }
    },
    {
      "id": 1105,
      "source": "condition-eval-cp3",
      "target": "state-incr-compteur-cp3",
      "condition": "false",
      "metadata": { "label": "false", "order": 105 }
    },
    {
      "id": 1106,
      "source": "state-incr-compteur-cp3",
      "target": "condition-max-tentatives-cp3",
      "condition": null,
      "metadata": { "order": 106 }
    },
    {
      "id": 1107,
      "source": "condition-max-tentatives-cp3",
      "target": "assistant-message-appel-prof-cp3",
      "condition": "3",
      "metadata": { "label": ">=3", "order": 107 }
    },
    {
      "id": 1108,
      "source": "condition-max-tentatives-cp3",
      "target": "agent-retroaction-cp3",
      "condition": null,
      "metadata": { "label": "default", "order": 108 }
    },
    {
      "id": 1109,
      "source": "agent-retroaction-cp3",
      "target": "wait-reponse-cp3",
      "condition": null,
      "metadata": { "order": 109 }
    },
    {
      "id": 1110,
      "source": "assistant-message-appel-prof-cp3",
      "target": "wait-code-prof-cp3",
      "condition": null,
      "metadata": { "order": 110 }
    },
    {
      "id": 1111,
      "source": "wait-code-prof-cp3",
      "target": "condition-code-prof-cp3",
      "condition": null,
      "metadata": { "order": 111 }
    },
    {
      "id": 1112,
      "source": "condition-code-prof-cp3",
      "target": "assistant-message-cp3-ok",
      "condition": "prof2024",
      "metadata": { "label": "code_ok", "order": 112 }
    },
    {
      "id": 1113,
      "source": "condition-code-prof-cp3",
      "target": "wait-code-prof-cp3",
      "condition": null,
      "metadata": { "label": "default", "order": 113 }
    },
    {
      "id": 1120,
      "source": "assistant-message-cp3-ok",
      "target": "assistant-message-section4",
      "condition": null,
      "metadata": { "order": 120 }
    },
    {
      "id": 1130,
      "source": "assistant-message-section4",
      "target": "widget-section4-done",
      "condition": null,
      "metadata": { "order": 130 }
    },
    {
      "id": 1131,
      "source": "widget-section4-done",
      "target": "condition-section4-done",
      "condition": null,
      "metadata": { "order": 131 }
    },
    {
      "id": 1132,
      "source": "condition-section4-done",
      "target": "assistant-message-checkpoint-git",
      "condition": "true",
      "metadata": { "label": "true", "order": 132 }
    },
    {
      "id": 1133,
      "source": "condition-section4-done",
      "target": "end-section4-abandon",
      "condition": null,
      "metadata": { "label": "default", "order": 133 }
    },
    {
      "id": 1140,
      "source": "assistant-message-checkpoint-git",
      "target": "state-init-compteur-cp4",
      "condition": null,
      "metadata": { "order": 140 }
    },
    {
      "id": 1141,
      "source": "state-init-compteur-cp4",
      "target": "wait-reponse-cp4",
      "condition": null,
      "metadata": { "order": 141 }
    },
    {
      "id": 1142,
      "source": "wait-reponse-cp4",
      "target": "agent-eval-cp4",
      "condition": null,
      "metadata": { "order": 142 }
    },
    {
      "id": 1143,
      "source": "agent-eval-cp4",
      "target": "condition-eval-cp4",
      "condition": null,
      "metadata": { "order": 143 }
    },
    {
      "id": 1144,
      "source": "condition-eval-cp4",
      "target": "assistant-message-cp4-ok",
      "condition": "true",
      "metadata": { "label": "true", "order": 144 }
    },
    {
      "id": 1145,
      "source": "condition-eval-cp4",
      "target": "state-incr-compteur-cp4",
      "condition": "false",
      "metadata": { "label": "false", "order": 145 }
    },
    {
      "id": 1146,
      "source": "state-incr-compteur-cp4",
      "target": "condition-max-tentatives-cp4",
      "condition": null,
      "metadata": { "order": 146 }
    },
    {
      "id": 1147,
      "source": "condition-max-tentatives-cp4",
      "target": "assistant-message-appel-prof-cp4",
      "condition": "3",
      "metadata": { "label": ">=3", "order": 147 }
    },
    {
      "id": 1148,
      "source": "condition-max-tentatives-cp4",
      "target": "agent-retroaction-cp4",
      "condition": null,
      "metadata": { "label": "default", "order": 148 }
    },
    {
      "id": 1149,
      "source": "agent-retroaction-cp4",
      "target": "wait-reponse-cp4",
      "condition": null,
      "metadata": { "order": 149 }
    },
    {
      "id": 1150,
      "source": "assistant-message-appel-prof-cp4",
      "target": "wait-code-prof-cp4",
      "condition": null,
      "metadata": { "order": 150 }
    },
    {
      "id": 1151,
      "source": "wait-code-prof-cp4",
      "target": "condition-code-prof-cp4",
      "condition": null,
      "metadata": { "order": 151 }
    },
    {
      "id": 1152,
      "source": "condition-code-prof-cp4",
      "target": "assistant-message-cp4-ok",
      "condition": "prof2024",
      "metadata": { "label": "code_ok", "order": 152 }
    },
    {
      "id": 1153,
      "source": "condition-code-prof-cp4",
      "target": "wait-code-prof-cp4",
      "condition": null,
      "metadata": { "label": "default", "order": 153 }
    },
    {
      "id": 1160,
      "source": "assistant-message-cp4-ok",
      "target": "assistant-message-section5",
      "condition": null,
      "metadata": { "order": 160 }
    },
    {
      "id": 1170,
      "source": "assistant-message-section5",
      "target": "widget-section5-done",
      "condition": null,
      "metadata": { "order": 170 }
    },
    {
      "id": 1171,
      "source": "widget-section5-done",
      "target": "condition-section5-done",
      "condition": null,
      "metadata": { "order": 171 }
    },
    {
      "id": 1172,
      "source": "condition-section5-done",
      "target": "assistant-message-checkpoint-tools",
      "condition": "true",
      "metadata": { "label": "true", "order": 172 }
    },
    {
      "id": 1173,
      "source": "condition-section5-done",
      "target": "end-section5-abandon",
      "condition": null,
      "metadata": { "label": "default", "order": 173 }
    },
    {
      "id": 1180,
      "source": "assistant-message-checkpoint-tools",
      "target": "state-init-compteur-cp5",
      "condition": null,
      "metadata": { "order": 180 }
    },
    {
      "id": 1181,
      "source": "state-init-compteur-cp5",
      "target": "wait-reponse-cp5",
      "condition": null,
      "metadata": { "order": 181 }
    },
    {
      "id": 1182,
      "source": "wait-reponse-cp5",
      "target": "agent-eval-cp5",
      "condition": null,
      "metadata": { "order": 182 }
    },
    {
      "id": 1183,
      "source": "agent-eval-cp5",
      "target": "condition-eval-cp5",
      "condition": null,
      "metadata": { "order": 183 }
    },
    {
      "id": 1184,
      "source": "condition-eval-cp5",
      "target": "assistant-message-cp5-ok",
      "condition": "true",
      "metadata": { "label": "true", "order": 184 }
    },
    {
      "id": 1185,
      "source": "condition-eval-cp5",
      "target": "state-incr-compteur-cp5",
      "condition": "false",
      "metadata": { "label": "false", "order": 185 }
    },
    {
      "id": 1186,
      "source": "state-incr-compteur-cp5",
      "target": "condition-max-tentatives-cp5",
      "condition": null,
      "metadata": { "order": 186 }
    },
    {
      "id": 1187,
      "source": "condition-max-tentatives-cp5",
      "target": "assistant-message-appel-prof-cp5",
      "condition": "3",
      "metadata": { "label": ">=3", "order": 187 }
    },
    {
      "id": 1188,
      "source": "condition-max-tentatives-cp5",
      "target": "agent-retroaction-cp5",
      "condition": null,
      "metadata": { "label": "default", "order": 188 }
    },
    {
      "id": 1189,
      "source": "agent-retroaction-cp5",
      "target": "wait-reponse-cp5",
      "condition": null,
      "metadata": { "order": 189 }
    },
    {
      "id": 1190,
      "source": "assistant-message-appel-prof-cp5",
      "target": "wait-code-prof-cp5",
      "condition": null,
      "metadata": { "order": 190 }
    },
    {
      "id": 1191,
      "source": "wait-code-prof-cp5",
      "target": "condition-code-prof-cp5",
      "condition": null,
      "metadata": { "order": 191 }
    },
    {
      "id": 1192,
      "source": "condition-code-prof-cp5",
      "target": "assistant-message-cp5-ok",
      "condition": "prof2024",
      "metadata": { "label": "code_ok", "order": 192 }
    },
    {
      "id": 1193,
      "source": "condition-code-prof-cp5",
      "target": "wait-code-prof-cp5",
      "condition": null,
      "metadata": { "label": "default", "order": 193 }
    },
    {
      "id": 1200,
      "source": "assistant-message-cp5-ok",
      "target": "assistant-message-section6",
      "condition": null,
      "metadata": { "order": 200 }
    },
    {
      "id": 1210,
      "source": "assistant-message-section6",
      "target": "widget-section6-done",
      "condition": null,
      "metadata": { "order": 210 }
    },
    {
      "id": 1211,
      "source": "widget-section6-done",
      "target": "condition-section6-done",
      "condition": null,
      "metadata": { "order": 211 }
    },
    {
      "id": 1212,
      "source": "condition-section6-done",
      "target": "assistant-message-checkpoint-lilygo",
      "condition": "true",
      "metadata": { "label": "true", "order": 212 }
    },
    {
      "id": 1213,
      "source": "condition-section6-done",
      "target": "end-section6-abandon",
      "condition": null,
      "metadata": { "label": "default", "order": 213 }
    },
    {
      "id": 1220,
      "source": "assistant-message-checkpoint-lilygo",
      "target": "state-init-compteur-cp6",
      "condition": null,
      "metadata": { "order": 220 }
    },
    {
      "id": 1221,
      "source": "state-init-compteur-cp6",
      "target": "wait-reponse-cp6",
      "condition": null,
      "metadata": { "order": 221 }
    },
    {
      "id": 1222,
      "source": "wait-reponse-cp6",
      "target": "agent-eval-cp6",
      "condition": null,
      "metadata": { "order": 222 }
    },
    {
      "id": 1223,
      "source": "agent-eval-cp6",
      "target": "condition-eval-cp6",
      "condition": null,
      "metadata": { "order": 223 }
    },
    {
      "id": 1224,
      "source": "condition-eval-cp6",
      "target": "assistant-message-cp6-ok",
      "condition": "true",
      "metadata": { "label": "true", "order": 224 }
    },
    {
      "id": 1225,
      "source": "condition-eval-cp6",
      "target": "state-incr-compteur-cp6",
      "condition": "false",
      "metadata": { "label": "false", "order": 225 }
    },
    {
      "id": 1226,
      "source": "state-incr-compteur-cp6",
      "target": "condition-max-tentatives-cp6",
      "condition": null,
      "metadata": { "order": 226 }
    },
    {
      "id": 1227,
      "source": "condition-max-tentatives-cp6",
      "target": "assistant-message-appel-prof-cp6",
      "condition": "3",
      "metadata": { "label": ">=3", "order": 227 }
    },
    {
      "id": 1228,
      "source": "condition-max-tentatives-cp6",
      "target": "agent-retroaction-cp6",
      "condition": null,
      "metadata": { "label": "default", "order": 228 }
    },
    {
      "id": 1229,
      "source": "agent-retroaction-cp6",
      "target": "wait-reponse-cp6",
      "condition": null,
      "metadata": { "order": 229 }
    },
    {
      "id": 1230,
      "source": "assistant-message-appel-prof-cp6",
      "target": "wait-code-prof-cp6",
      "condition": null,
      "metadata": { "order": 230 }
    },
    {
      "id": 1231,
      "source": "wait-code-prof-cp6",
      "target": "condition-code-prof-cp6",
      "condition": null,
      "metadata": { "order": 231 }
    },
    {
      "id": 1232,
      "source": "condition-code-prof-cp6",
      "target": "assistant-message-cp6-ok",
      "condition": "prof2024",
      "metadata": { "label": "code_ok", "order": 232 }
    },
    {
      "id": 1233,
      "source": "condition-code-prof-cp6",
      "target": "wait-code-prof-cp6",
      "condition": null,
      "metadata": { "label": "default", "order": 233 }
    },
    {
      "id": 1240,
      "source": "assistant-message-cp6-ok",
      "target": "assistant-message-fin",
      "condition": null,
      "metadata": { "order": 240 }
    },
    {
      "id": 1250,
      "source": "assistant-message-fin",
      "target": "end-success",
      "condition": null,
      "metadata": { "order": 250 }
    }
  ]
}
